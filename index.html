<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>风浪矩阵</title>
    <style>
        :root {
            --bg-ocean: #0c4a6e;
            --bg-deep: #083344;
            --sunshine: #fde047;
            --energy-orange: #f97316;
            --water-cyan: #22d3ee;
            --text-bright: #ffffff;
            --text-dim: #bae6fd;
            --border-soft: rgba(255, 255, 255, 0.1);
            --row-h: 34px;
            --header-h: 40px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            background: linear-gradient(135deg, var(--bg-ocean), var(--bg-deep)); 
            color: var(--text-bright); 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            font-size: 13px;
        }

        .dashboard { max-width: 600px; margin: 0 auto; padding-bottom: 50px; background: rgba(0, 0, 0, 0.1); }
        
        header { 
            padding: 15px 12px; 
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-soft);
        }
        h1 { font-size: 1.1rem; font-weight: 800; color: var(--sunshine); }
        #sub-header { font-size: 0.7rem; color: var(--text-dim); margin-top: 2px; }

        .v-grid { display: flex; flex-direction: column; width: 100%; }
        
        /* Integrated Sticky Header */
        .v-header {
            display: flex;
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(12, 74, 110, 0.98);
            backdrop-filter: blur(12px);
            border-bottom: 2px solid var(--sunshine);
            height: var(--header-h);
            align-items: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .v-row { display: flex; border-bottom: 1px solid var(--border-soft); height: var(--row-h); align-items: stretch; position: relative; }
        .v-cell { 
            flex: 1; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            border-right: 1px solid var(--border-soft);
            position: relative;
            min-width: 0;
        }
        .v-cell:last-child { border-right: none; }

        .h-cell { font-size: 0.55rem; font-weight: 900; color: var(--text-dim); text-align: center; line-height: 1.1; }
        .h-date-time { flex: 1.6; display: flex; flex-direction: column; justify-content: center; background: transparent; }
        .h-date { color: var(--sunshine); font-size: 0.65rem; width: 100%; }

        .val-text { 
            position: relative;
            z-index: 10;
            font-family: 'Inter', monospace; 
            font-weight: 900; 
            font-size: 0.72rem; 
            text-shadow: 0 1px 3px rgba(0,0,0,0.6);
        }
        
        .flow-box { width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none; }
        .flow-svg { width: 100%; height: 100%; display: block; overflow: visible; }

        .arrow-icon { font-size: 0.9rem; z-index: 10; font-weight: bold; }

        /* Column Specific Flex */
        .col-dt { flex: 1.2; } /* Combined Date/Time Column */
        .col-c { flex: 0.85; }
        .col-w { flex: 1; }
        .col-d { flex: 0.85; }

        /* Day transition indicator (not a full row divider) */
        .day-mark { border-top: 2px solid var(--sunshine) !important; }
    </style>
</head>
<body>
    <div class="dashboard">
        <header>
            <h1>风浪矩阵</h1>
            <p id="sub-header">金梦海湾</p>
        </header>

        <div class="v-grid" id="main-grid">
            <!-- Integrated Header -->
            <div class="v-header">
                <div class="v-cell h-cell h-date-time col-dt">
                    <div id="sticky-date" class="h-date">--月--日</div>
                    
                </div>
                <div class="v-cell h-cell col-c">云量<br>(%)</div>
                <div class="v-cell h-cell col-w">气温<br>(℃)</div>
                <div class="v-cell h-cell col-d">风向</div>
                <div class="v-cell h-cell col-w">阵风<br>(m/s)</div>
                <div class="v-cell h-cell col-w">风速<br>(m/s)</div>
                <div class="v-cell h-cell col-d">波向</div>
                <div class="v-cell h-cell col-w">波高<br>(m)</div>
            </div>
        </div>
    </div>

    <script>
        const weatherData = {
    "2026-01-07 08:00": {
        "云量": 0.0,
        "气温": -4.73,
        "风向": 346.89,
        "风速": 0.82,
        "阵风风速": 2.87,
        "海浪方向": 51.29,
        "海浪高度": 0.37
    },
    "2026-01-07 09:00": {
        "云量": 0.0,
        "气温": -4.73,
        "风向": 332.39,
        "风速": 0.89,
        "阵风风速": 4.42,
        "海浪方向": 52.88,
        "海浪高度": 0.44
    },
    "2026-01-07 10:00": {
        "云量": 0.0,
        "气温": -4.73,
        "风向": 317.89,
        "风速": 0.97,
        "阵风风速": 4.42,
        "海浪方向": 54.46,
        "海浪高度": 0.51
    },
    "2026-01-07 11:00": {
        "云量": 0.0,
        "气温": -4.73,
        "风向": 303.39,
        "风速": 1.04,
        "阵风风速": 4.42,
        "海浪方向": 56.05,
        "海浪高度": 0.58
    },
    "2026-01-07 12:00": {
        "云量": 1.67,
        "气温": -3.12,
        "风向": 288.6,
        "风速": 1.3,
        "阵风风速": 5.61,
        "海浪方向": 56.08,
        "海浪高度": 0.58
    },
    "2026-01-07 13:00": {
        "云量": 3.33,
        "气温": -1.5,
        "风向": 273.8,
        "风速": 1.55,
        "阵风风速": 5.61,
        "海浪方向": 56.12,
        "海浪高度": 0.58
    },
    "2026-01-07 14:00": {
        "云量": 5.0,
        "气温": 0.11,
        "风向": 259.01,
        "风速": 1.81,
        "阵风风速": 5.61,
        "海浪方向": 56.15,
        "海浪高度": 0.58
    },
    "2026-01-07 15:00": {
        "云量": 10.33,
        "气温": -0.78,
        "风向": 253.55,
        "风速": 1.68,
        "阵风风速": 3.85,
        "海浪方向": 55.83,
        "海浪高度": 0.55
    },
    "2026-01-07 16:00": {
        "云量": 15.67,
        "气温": -1.68,
        "风向": 248.1,
        "风速": 1.55,
        "阵风风速": 3.85,
        "海浪方向": 55.52,
        "海浪高度": 0.51
    },
    "2026-01-07 17:00": {
        "云量": 21.0,
        "气温": -2.57,
        "风向": 242.64,
        "风速": 1.42,
        "阵风风速": 3.85,
        "海浪方向": 55.2,
        "海浪高度": 0.48
    },
    "2026-01-07 18:00": {
        "云量": 16.8,
        "气温": -3.15,
        "风向": 289.3,
        "风速": 1.76,
        "阵风风速": 4.64,
        "海浪方向": 54.96,
        "海浪高度": 0.45
    },
    "2026-01-07 19:00": {
        "云量": 12.6,
        "气温": -3.72,
        "风向": 335.95,
        "风速": 2.11,
        "阵风风速": 4.64,
        "海浪方向": 54.72,
        "海浪高度": 0.41
    },
    "2026-01-07 20:00": {
        "云量": 8.4,
        "气温": -4.3,
        "风向": 22.61,
        "风速": 2.45,
        "阵风风速": 4.64,
        "海浪方向": 54.48,
        "海浪高度": 0.38
    },
    "2026-01-07 21:00": {
        "云量": 5.6,
        "气温": -4.47,
        "风向": 26.35,
        "风速": 2.49,
        "阵风风速": 4.83,
        "海浪方向": 53.98,
        "海浪高度": 0.31
    },
    "2026-01-07 22:00": {
        "云量": 2.8,
        "气温": -4.64,
        "风向": 30.08,
        "风速": 2.53,
        "阵风风速": 4.83,
        "海浪方向": 53.48,
        "海浪高度": 0.23
    },
    "2026-01-07 23:00": {
        "云量": 0.0,
        "气温": -4.81,
        "风向": 33.82,
        "风速": 2.57,
        "阵风风速": 4.83,
        "海浪方向": 52.98,
        "海浪高度": 0.16
    },
    "2026-01-08 00:00": {
        "云量": 0.0,
        "气温": -5.49,
        "风向": 30.31,
        "风速": 2.33,
        "阵风风速": 4.93,
        "海浪方向": 43.38,
        "海浪高度": 0.21
    },
    "2026-01-08 01:00": {
        "云量": 0.0,
        "气温": -6.16,
        "风向": 26.8,
        "风速": 2.09,
        "阵风风速": 4.93,
        "海浪方向": 33.78,
        "海浪高度": 0.27
    },
    "2026-01-08 02:00": {
        "云量": 0.0,
        "气温": -6.84,
        "风向": 23.29,
        "风速": 1.85,
        "阵风风速": 4.93,
        "海浪方向": 24.18,
        "海浪高度": 0.32
    },
    "2026-01-08 03:00": {
        "云量": 0.0,
        "气温": -7.36,
        "风向": 10.32,
        "风速": 1.41,
        "阵风风速": 1.7,
        "海浪方向": 34.54,
        "海浪高度": 0.41
    },
    "2026-01-08 04:00": {
        "云量": 0.0,
        "气温": -7.88,
        "风向": 357.35,
        "风速": 0.96,
        "阵风风速": 1.7,
        "海浪方向": 44.9,
        "海浪高度": 0.51
    },
    "2026-01-08 05:00": {
        "云量": 0.0,
        "气温": -8.41,
        "风向": 344.38,
        "风速": 0.52,
        "阵风风速": 1.7,
        "海浪方向": 55.26,
        "海浪高度": 0.6
    },
    "2026-01-08 06:00": {
        "云量": 0.0,
        "气温": -8.49,
        "风向": 335.81,
        "风速": 0.54,
        "阵风风速": 1.98,
        "海浪方向": 57.66,
        "海浪高度": 0.58
    },
    "2026-01-08 07:00": {
        "云量": 0.0,
        "气温": -8.57,
        "风向": 327.24,
        "风速": 0.57,
        "阵风风速": 1.98,
        "海浪方向": 60.05,
        "海浪高度": 0.55
    },
    "2026-01-08 08:00": {
        "云量": 0.0,
        "气温": -8.65,
        "风向": 318.67,
        "风速": 0.59,
        "阵风风速": 1.98,
        "海浪方向": 62.45,
        "海浪高度": 0.53
    },
    "2026-01-08 09:00": {
        "云量": 0.0,
        "气温": -8.34,
        "风向": 289.04,
        "风速": 1.33,
        "阵风风速": 7.04,
        "海浪方向": 63.55,
        "海浪高度": 0.49
    },
    "2026-01-08 10:00": {
        "云量": 0.0,
        "气温": -8.04,
        "风向": 259.4,
        "风速": 2.07,
        "阵风风速": 7.04,
        "海浪方向": 64.64,
        "海浪高度": 0.45
    },
    "2026-01-08 11:00": {
        "云量": 0.0,
        "气温": -7.73,
        "风向": 229.77,
        "风速": 2.81,
        "阵风风速": 7.04,
        "海浪方向": 65.74,
        "海浪高度": 0.41
    },
    "2026-01-08 12:00": {
        "云量": 0.0,
        "气温": -5.38,
        "风向": 234.79,
        "风速": 3.63,
        "阵风风速": 11.72,
        "海浪方向": 64.9,
        "海浪高度": 0.36
    },
    "2026-01-08 13:00": {
        "云量": 0.0,
        "气温": -3.03,
        "风向": 239.82,
        "风速": 4.44,
        "阵风风速": 11.72,
        "海浪方向": 64.07,
        "海浪高度": 0.31
    },
    "2026-01-08 14:00": {
        "云量": 0.0,
        "气温": -0.68,
        "风向": 244.84,
        "风速": 5.26,
        "阵风风速": 11.72,
        "海浪方向": 63.23,
        "海浪高度": 0.26
    },
    "2026-01-08 15:00": {
        "云量": 0.0,
        "气温": -0.27,
        "风向": 242.59,
        "风速": 5.15,
        "阵风风速": 10.93,
        "海浪方向": 61.79,
        "海浪高度": 0.22
    },
    "2026-01-08 16:00": {
        "云量": 0.0,
        "气温": 0.14,
        "风向": 240.33,
        "风速": 5.04,
        "阵风风速": 10.93,
        "海浪方向": 60.35,
        "海浪高度": 0.18
    },
    "2026-01-08 17:00": {
        "云量": 0.0,
        "气温": 0.55,
        "风向": 238.08,
        "风速": 4.93,
        "阵风风速": 10.93,
        "海浪方向": 58.91,
        "海浪高度": 0.14
    },
    "2026-01-08 18:00": {
        "云量": 0.0,
        "气温": -0.15,
        "风向": 245.46,
        "风速": 4.65,
        "阵风风速": 9.14,
        "海浪方向": 95.69,
        "海浪高度": 0.19
    },
    "2026-01-08 19:00": {
        "云量": 0.0,
        "气温": -0.85,
        "风向": 252.84,
        "风速": 4.38,
        "阵风风速": 9.14,
        "海浪方向": 132.46,
        "海浪高度": 0.23
    },
    "2026-01-08 20:00": {
        "云量": 0.0,
        "气温": -1.55,
        "风向": 260.22,
        "风速": 4.1,
        "阵风风速": 9.14,
        "海浪方向": 169.24,
        "海浪高度": 0.28
    },
    "2026-01-08 21:00": {
        "云量": 1.67,
        "气温": -1.7,
        "风向": 262.91,
        "风速": 3.95,
        "阵风风速": 8.04,
        "海浪方向": 171.75,
        "海浪高度": 0.36
    },
    "2026-01-08 22:00": {
        "云量": 3.33,
        "气温": -1.84,
        "风向": 265.61,
        "风速": 3.81,
        "阵风风速": 8.04,
        "海浪方向": 174.25,
        "海浪高度": 0.43
    },
    "2026-01-08 23:00": {
        "云量": 5.0,
        "气温": -1.99,
        "风向": 268.3,
        "风速": 3.66,
        "阵风风速": 8.04,
        "海浪方向": 176.76,
        "海浪高度": 0.51
    },
    "2026-01-09 00:00": {
        "云量": 34.73,
        "气温": -2.26,
        "风向": 269.72,
        "风速": 3.49,
        "阵风风速": 6.98,
        "海浪方向": 180.3,
        "海浪高度": 0.58
    },
    "2026-01-09 01:00": {
        "云量": 64.47,
        "气温": -2.54,
        "风向": 271.13,
        "风速": 3.31,
        "阵风风速": 6.98,
        "海浪方向": 183.85,
        "海浪高度": 0.64
    },
    "2026-01-09 02:00": {
        "云量": 94.2,
        "气温": -2.81,
        "风向": 272.55,
        "风速": 3.14,
        "阵风风速": 6.98,
        "海浪方向": 187.39,
        "海浪高度": 0.71
    },
    "2026-01-09 03:00": {
        "云量": 96.13,
        "气温": -3.06,
        "风向": 271.74,
        "风速": 2.92,
        "阵风风速": 5.5,
        "海浪方向": 188.68,
        "海浪高度": 0.71
    },
    "2026-01-09 04:00": {
        "云量": 98.07,
        "气温": -3.32,
        "风向": 270.93,
        "风速": 2.69,
        "阵风风速": 5.5,
        "海浪方向": 189.97,
        "海浪高度": 0.7
    },
    "2026-01-09 05:00": {
        "云量": 100.0,
        "气温": -3.58,
        "风向": 270.12,
        "风速": 2.47,
        "阵风风速": 5.5,
        "海浪方向": 191.26,
        "海浪高度": 0.7
    },
    "2026-01-09 06:00": {
        "云量": 100.0,
        "气温": -3.78,
        "风向": 273.7,
        "风速": 2.35,
        "阵风风速": 4.56,
        "海浪方向": 189.66,
        "海浪高度": 0.7
    },
    "2026-01-09 07:00": {
        "云量": 100.0,
        "气温": -3.98,
        "风向": 277.29,
        "风速": 2.24,
        "阵风风速": 4.56,
        "海浪方向": 188.06,
        "海浪高度": 0.7
    },
    "2026-01-09 08:00": {
        "云量": 100.0,
        "气温": -4.18,
        "风向": 280.87,
        "风速": 2.12,
        "阵风风速": 4.56,
        "海浪方向": 186.46,
        "海浪高度": 0.7
    },
    "2026-01-09 09:00": {
        "云量": 67.47,
        "气温": -4.03,
        "风向": 269.99,
        "风速": 2.17,
        "阵风风速": 6.08,
        "海浪方向": 186.4,
        "海浪高度": 0.7
    },
    "2026-01-09 10:00": {
        "云量": 34.93,
        "气温": -3.89,
        "风向": 259.11,
        "风速": 2.21,
        "阵风风速": 6.08,
        "海浪方向": 186.33,
        "海浪高度": 0.7
    },
    "2026-01-09 11:00": {
        "云量": 2.4,
        "气温": -3.75,
        "风向": 248.23,
        "风速": 2.26,
        "阵风风速": 6.08,
        "海浪方向": 186.27,
        "海浪高度": 0.7
    },
    "2026-01-09 12:00": {
        "云量": 34.93,
        "气温": -1.59,
        "风向": 243.1,
        "风速": 2.36,
        "阵风风速": 7.1,
        "海浪方向": 183.79,
        "海浪高度": 0.68
    },
    "2026-01-09 13:00": {
        "云量": 67.47,
        "气温": 0.56,
        "风向": 237.98,
        "风速": 2.45,
        "阵风风速": 7.1,
        "海浪方向": 181.31,
        "海浪高度": 0.67
    },
    "2026-01-09 14:00": {
        "云量": 100.0,
        "气温": 2.72,
        "风向": 232.85,
        "风速": 2.55,
        "阵风风速": 7.1,
        "海浪方向": 178.83,
        "海浪高度": 0.65
    },
    "2026-01-09 15:00": {
        "云量": 82.13,
        "气温": 1.85,
        "风向": 238.97,
        "风速": 2.36,
        "阵风风速": 4.64,
        "海浪方向": 176.23,
        "海浪高度": 0.63
    },
    "2026-01-09 16:00": {
        "云量": 64.27,
        "气温": 0.98,
        "风向": 245.09,
        "风速": 2.16,
        "阵风风速": 4.64,
        "海浪方向": 173.64,
        "海浪高度": 0.6
    },
    "2026-01-09 17:00": {
        "云量": 46.4,
        "气温": 0.11,
        "风向": 251.21,
        "风速": 1.97,
        "阵风风速": 4.64,
        "海浪方向": 171.04,
        "海浪高度": 0.58
    },
    "2026-01-09 18:00": {
        "云量": 64.27,
        "气温": -0.27,
        "风向": 265.38,
        "风速": 2.31,
        "阵风风速": 6.31,
        "海浪方向": 172.43,
        "海浪高度": 0.58
    },
    "2026-01-09 19:00": {
        "云量": 82.13,
        "气温": -0.66,
        "风向": 279.54,
        "风速": 2.64,
        "阵风风速": 6.31,
        "海浪方向": 173.83,
        "海浪高度": 0.59
    },
    "2026-01-09 20:00": {
        "云量": 100.0,
        "气温": -1.04,
        "风向": 293.71,
        "风速": 2.98,
        "阵风风速": 6.31,
        "海浪方向": 175.22,
        "海浪高度": 0.59
    },
    "2026-01-09 21:00": {
        "云量": 99.73,
        "气温": -1.47,
        "风向": 295.63,
        "风速": 2.75,
        "阵风风速": 5.48,
        "海浪方向": 176.74,
        "海浪高度": 0.57
    },
    "2026-01-09 22:00": {
        "云量": 99.47,
        "气温": -1.89,
        "风向": 297.55,
        "风速": 2.51,
        "阵风风速": 5.48,
        "海浪方向": 178.27,
        "海浪高度": 0.54
    },
    "2026-01-09 23:00": {
        "云量": 99.2,
        "气温": -2.32,
        "风向": 299.47,
        "风速": 2.28,
        "阵风风速": 5.48,
        "海浪方向": 179.79,
        "海浪高度": 0.52
    },
    "2026-01-10 00:00": {
        "云量": 97.7,
        "气温": -2.66,
        "风向": 316.64,
        "风速": 2.29,
        "阵风风速": 5.77,
        "海浪方向": 192.99,
        "海浪高度": 0.45
    },
    "2026-01-10 01:00": {
        "云量": 96.2,
        "气温": -2.99,
        "风向": 333.81,
        "风速": 2.29,
        "阵风风速": 5.77,
        "海浪方向": 206.19,
        "海浪高度": 0.39
    },
    "2026-01-10 02:00": {
        "云量": 94.7,
        "气温": -3.32,
        "风向": 350.98,
        "风速": 2.3,
        "阵风风速": 5.77,
        "海浪方向": 219.39,
        "海浪高度": 0.32
    },
    "2026-01-10 03:00": {
        "云量": 96.47,
        "气温": -4.07,
        "风向": 354.54,
        "风速": 2.53,
        "阵风风速": 6.81,
        "海浪方向": 224.1,
        "海浪高度": 0.32
    },
    "2026-01-10 04:00": {
        "云量": 98.23,
        "气温": -4.81,
        "风向": 358.11,
        "风速": 2.75,
        "阵风风速": 6.81,
        "海浪方向": 228.8,
        "海浪高度": 0.33
    },
    "2026-01-10 05:00": {
        "云量": 100.0,
        "气温": -5.56,
        "风向": 1.67,
        "风速": 2.98,
        "阵风风速": 6.81,
        "海浪方向": 233.51,
        "海浪高度": 0.33
    },
    "2026-01-10 06:00": {
        "云量": 100.0,
        "气温": -5.73,
        "风向": 358.02,
        "风速": 3.19,
        "阵风风速": 8.64,
        "海浪方向": 175.03,
        "海浪高度": 0.35
    },
    "2026-01-10 07:00": {
        "云量": 100.0,
        "气温": -5.9,
        "风向": 354.37,
        "风速": 3.39,
        "阵风风速": 8.64,
        "海浪方向": 116.54,
        "海浪高度": 0.38
    },
    "2026-01-10 08:00": {
        "云量": 100.0,
        "气温": -6.07,
        "风向": 350.72,
        "风速": 3.6,
        "阵风风速": 8.64,
        "海浪方向": 58.06,
        "海浪高度": 0.4
    },
    "2026-01-10 09:00": {
        "云量": 100.0,
        "气温": -6.06,
        "风向": 352.31,
        "风速": 3.8,
        "阵风风速": 10.12,
        "海浪方向": 55.93,
        "海浪高度": 0.52
    },
    "2026-01-10 10:00": {
        "云量": 100.0,
        "气温": -6.05,
        "风向": 353.89,
        "风速": 4.01,
        "阵风风速": 10.12,
        "海浪方向": 53.8,
        "海浪高度": 0.63
    },
    "2026-01-10 11:00": {
        "云量": 100.0,
        "气温": -6.05,
        "风向": 355.48,
        "风速": 4.21,
        "阵风风速": 10.12,
        "海浪方向": 51.67,
        "海浪高度": 0.75
    },
    "2026-01-10 12:00": {
        "云量": 100.0,
        "气温": -5.49,
        "风向": 352.56,
        "风速": 4.1,
        "阵风风速": 9.34,
        "海浪方向": 51.74,
        "海浪高度": 0.76
    },
    "2026-01-10 13:00": {
        "云量": 100.0,
        "气温": -4.94,
        "风向": 349.63,
        "风速": 3.99,
        "阵风风速": 9.34,
        "海浪方向": 51.8,
        "海浪高度": 0.78
    },
    "2026-01-10 14:00": {
        "云量": 100.0,
        "气温": -4.39,
        "风向": 346.71,
        "风速": 3.88,
        "阵风风速": 9.34,
        "海浪方向": 51.87,
        "海浪高度": 0.79
    },
    "2026-01-10 15:00": {
        "云量": 100.0,
        "气温": -4.6,
        "风向": 9.41,
        "风速": 2.99,
        "阵风风速": 3.57,
        "海浪方向": 48.71,
        "海浪高度": 0.8
    },
    "2026-01-10 16:00": {
        "云量": 100.0,
        "气温": -4.81,
        "风向": 32.12,
        "风速": 2.1,
        "阵风风速": 3.57,
        "海浪方向": 45.55,
        "海浪高度": 0.81
    },
    "2026-01-10 17:00": {
        "云量": 100.0,
        "气温": -5.01,
        "风向": 54.82,
        "风速": 1.21,
        "阵风风速": 3.57,
        "海浪方向": 42.39,
        "海浪高度": 0.82
    },
    "2026-01-10 18:00": {
        "云量": 100.0,
        "气温": -5.34,
        "风向": 13.56,
        "风速": 1.4,
        "阵风风速": 3.92,
        "海浪方向": 45.73,
        "海浪高度": 0.76
    },
    "2026-01-10 19:00": {
        "云量": 100.0,
        "气温": -5.67,
        "风向": 332.3,
        "风速": 1.6,
        "阵风风速": 3.92,
        "海浪方向": 49.06,
        "海浪高度": 0.69
    },
    "2026-01-10 20:00": {
        "云量": 100.0,
        "气温": -6.0,
        "风向": 291.04,
        "风速": 1.79,
        "阵风风速": 3.92,
        "海浪方向": 52.4,
        "海浪高度": 0.63
    },
    "2026-01-10 21:00": {
        "云量": 94.63,
        "气温": -6.5,
        "风向": 303.95,
        "风速": 2.56,
        "阵风风速": 8.18,
        "海浪方向": 51.99,
        "海浪高度": 0.61
    },
    "2026-01-10 22:00": {
        "云量": 89.27,
        "气温": -6.99,
        "风向": 316.85,
        "风速": 3.33,
        "阵风风速": 8.18,
        "海浪方向": 51.58,
        "海浪高度": 0.6
    },
    "2026-01-10 23:00": {
        "云量": 83.9,
        "气温": -7.49,
        "风向": 329.76,
        "风速": 4.1,
        "阵风风速": 8.18,
        "海浪方向": 51.17,
        "海浪高度": 0.58
    },
    "2026-01-11 00:00": {
        "云量": 55.93,
        "气温": -8.28,
        "风向": 327.22,
        "风速": 4.28,
        "阵风风速": 10.1,
        "海浪方向": 51.89,
        "海浪高度": 0.52
    },
    "2026-01-11 01:00": {
        "云量": 27.97,
        "气温": -9.07,
        "风向": 324.67,
        "风速": 4.46,
        "阵风风速": 10.1,
        "海浪方向": 52.6,
        "海浪高度": 0.45
    },
    "2026-01-11 02:00": {
        "云量": 0.0,
        "气温": -9.86,
        "风向": 322.13,
        "风速": 4.64,
        "阵风风速": 10.1,
        "海浪方向": 53.32,
        "海浪高度": 0.39
    },
    "2026-01-11 03:00": {
        "云量": 0.0,
        "气温": -10.5,
        "风向": 307.79,
        "风速": 3.65,
        "阵风风速": 9.53,
        "海浪方向": 52.02,
        "海浪高度": 0.5
    },
    "2026-01-11 04:00": {
        "云量": 0.0,
        "气温": -11.14,
        "风向": 293.44,
        "风速": 2.67,
        "阵风风速": 9.53,
        "海浪方向": 50.71,
        "海浪高度": 0.6
    },
    "2026-01-11 05:00": {
        "云量": 0.0,
        "气温": -11.78,
        "风向": 279.1,
        "风速": 1.68,
        "阵风风速": 9.53,
        "海浪方向": 49.41,
        "海浪高度": 0.71
    },
    "2026-01-11 06:00": {
        "云量": 0.0,
        "气温": -12.11,
        "风向": 293.49,
        "风速": 1.93,
        "阵风风速": 5.24,
        "海浪方向": 49.77,
        "海浪高度": 0.72
    },
    "2026-01-11 07:00": {
        "云量": 0.0,
        "气温": -12.43,
        "风向": 307.88,
        "风速": 2.19,
        "阵风风速": 5.24,
        "海浪方向": 50.14,
        "海浪高度": 0.74
    },
    "2026-01-11 08:00": {
        "云量": 0.0,
        "气温": -12.76,
        "风向": 322.27,
        "风速": 2.44,
        "阵风风速": 5.24,
        "海浪方向": 50.5,
        "海浪高度": 0.75
    },
    "2026-01-11 09:00": {
        "云量": 0.0,
        "气温": -12.55,
        "风向": 318.43,
        "风速": 2.62,
        "阵风风速": 7.61,
        "海浪方向": 48.28,
        "海浪高度": 0.69
    },
    "2026-01-11 10:00": {
        "云量": 0.0,
        "气温": -12.34,
        "风向": 314.6,
        "风速": 2.81,
        "阵风风速": 7.61,
        "海浪方向": 46.05,
        "海浪高度": 0.62
    },
    "2026-01-11 11:00": {
        "云量": 0.0,
        "气温": -12.13,
        "风向": 310.76,
        "风速": 2.99,
        "阵风风速": 7.61,
        "海浪方向": 43.83,
        "海浪高度": 0.56
    },
    "2026-01-11 12:00": {
        "云量": 0.0,
        "气温": -10.8,
        "风向": 294.67,
        "风速": 2.95,
        "阵风风速": 7.64,
        "海浪方向": 43.62,
        "海浪高度": 0.51
    },
    "2026-01-11 13:00": {
        "云量": 0.0,
        "气温": -9.47,
        "风向": 278.58,
        "风速": 2.92,
        "阵风风速": 7.64,
        "海浪方向": 43.42,
        "海浪高度": 0.46
    },
    "2026-01-11 14:00": {
        "云量": 0.0,
        "气温": -8.14,
        "风向": 262.49,
        "风速": 2.88,
        "阵风风速": 7.64,
        "海浪方向": 43.21,
        "海浪高度": 0.41
    },
    "2026-01-11 15:00": {
        "云量": 0.0,
        "气温": -7.98,
        "风向": 257.04,
        "风速": 2.67,
        "阵风风速": 7.5,
        "海浪方向": 42.45,
        "海浪高度": 0.37
    },
    "2026-01-11 16:00": {
        "云量": 0.0,
        "气温": -7.83,
        "风向": 251.6,
        "风速": 2.46,
        "阵风风速": 7.5,
        "海浪方向": 41.7,
        "海浪高度": 0.33
    },
    "2026-01-11 17:00": {
        "云量": 0.0,
        "气温": -7.67,
        "风向": 246.15,
        "风速": 2.25,
        "阵风风速": 7.5,
        "海浪方向": 40.94,
        "海浪高度": 0.29
    },
    "2026-01-11 18:00": {
        "云量": 1.67,
        "气温": -7.98,
        "风向": 245.76,
        "风速": 2.84,
        "阵风风速": 8.12,
        "海浪方向": 41.74,
        "海浪高度": 0.26
    },
    "2026-01-11 19:00": {
        "云量": 3.33,
        "气温": -8.29,
        "风向": 245.38,
        "风速": 3.44,
        "阵风风速": 8.12,
        "海浪方向": 42.54,
        "海浪高度": 0.24
    },
    "2026-01-11 20:00": {
        "云量": 5.0,
        "气温": -8.59,
        "风向": 244.99,
        "风速": 4.03,
        "阵风风速": 8.12,
        "海浪方向": 43.34,
        "海浪高度": 0.21
    },
    "2026-01-11 21:00": {
        "云量": 4.77,
        "气温": -8.63,
        "风向": 247.25,
        "风速": 4.58,
        "阵风风速": 11.9,
        "海浪方向": 44.21,
        "海浪高度": 0.18
    },
    "2026-01-11 22:00": {
        "云量": 4.53,
        "气温": -8.67,
        "风向": 249.51,
        "风速": 5.13,
        "阵风风速": 11.9,
        "海浪方向": 45.08,
        "海浪高度": 0.16
    },
    "2026-01-11 23:00": {
        "云量": 4.3,
        "气温": -8.71,
        "风向": 251.77,
        "风速": 5.68,
        "阵风风速": 11.9,
        "海浪方向": 45.95,
        "海浪高度": 0.13
    },
    "2026-01-12 00:00": {
        "云量": 2.87,
        "气温": -8.5,
        "风向": 255.06,
        "风速": 5.62,
        "阵风风速": 12.56,
        "海浪方向": 85.39,
        "海浪高度": 0.16
    },
    "2026-01-12 01:00": {
        "云量": 1.43,
        "气温": -8.29,
        "风向": 258.36,
        "风速": 5.55,
        "阵风风速": 12.56,
        "海浪方向": 124.82,
        "海浪高度": 0.19
    },
    "2026-01-12 02:00": {
        "云量": 0.0,
        "气温": -8.08,
        "风向": 261.65,
        "风速": 5.49,
        "阵风风速": 12.56,
        "海浪方向": 164.26,
        "海浪高度": 0.22
    },
    "2026-01-12 03:00": {
        "云量": 0.0,
        "气温": -7.65,
        "风向": 263.66,
        "风速": 5.12,
        "阵风风速": 11.55,
        "海浪方向": 169.28,
        "海浪高度": 0.34
    },
    "2026-01-12 04:00": {
        "云量": 0.0,
        "气温": -7.21,
        "风向": 265.66,
        "风速": 4.75,
        "阵风风速": 11.55,
        "海浪方向": 174.3,
        "海浪高度": 0.47
    },
    "2026-01-12 05:00": {
        "云量": 0.0,
        "气温": -6.78,
        "风向": 267.67,
        "风速": 4.38,
        "阵风风速": 11.55,
        "海浪方向": 179.32,
        "海浪高度": 0.59
    },
    "2026-01-12 06:00": {
        "云量": 33.33,
        "气温": -6.95,
        "风向": 266.66,
        "风速": 4.38,
        "阵风风速": 9.46,
        "海浪方向": 184.07,
        "海浪高度": 0.66
    },
    "2026-01-12 07:00": {
        "云量": 66.67,
        "气温": -7.13,
        "风向": 265.65,
        "风速": 4.39,
        "阵风风速": 9.46,
        "海浪方向": 188.81,
        "海浪高度": 0.74
    }
};

        function interpolateColor(c1, c2, f) {
            const h = c => parseInt(c, 16);
            const r1 = h(c1.substring(1,3)), g1 = h(c1.substring(3,5)), b1 = h(c1.substring(5,7));
            const r2 = h(c2.substring(1,3)), g2 = h(c2.substring(3,5)), b2 = h(c2.substring(5,7));
            return `#${[Math.round(r1+(r2-r1)*f), Math.round(g1+(g2-g1)*f), Math.round(b1+(b2-b1)*f)].map(x=>x.toString(16).padStart(2,'0')).join('')}`;
        }

        function getColor(metric, val) {
            const scales = {
                temp: [{v:-10,c:'#0ea5e9'}, {v:0,c:'#22d3ee'}, {v:10,c:'#fbbf24'}, {v:25,c:'#f97316'}],
                wind: [{v:0,c:'#38bdf8'}, {v:5,c:'#22d3ee'}, {v:10,c:'#fde047'}, {v:20,c:'#ef4444'}],
                cloud: [{v:0,c:'#e0f2fe'}, {v:50,c:'#7dd3fc'}, {v:100,c:'#334155'}],
                swell: [{v:0,c:'#38bdf8'}, {v:1,c:'#22d3ee'}, {v:2,c:'#fde047'}, {v:4,c:'#f97316'}]
            };
            const s = scales[metric] || scales['wind'];
            if (val <= s[0].v) return s[0].c;
            if (val >= s[s.length-1].v) return s[s.length-1].c;
            for (let i=0; i<s.length-1; i++) {
                if (val >= s[i].v && val <= s[i+1].v) return interpolateColor(s[i].c, s[i+1].c, (val-s[i].v)/(s[i+1].v-s[i].v));
            }
            return s[0].c;
        }

        const metrics = [
            { mk: 'cloud', g: v => v['云量'], n: v => v },
            { mk: 'temp', g: v => v['气温'], n: v => Math.min(100, Math.max(10, ((v+15)/35)*100)) },
            { mk: 'dir', g: v => v['风向'], dir: true },
            { mk: 'wind', g: v => v['阵风风速'], n: v => Math.min(100, (v/15)*100), colorTag: 'wind' },
            { mk: 'wind', g: v => v['风速'], n: v => Math.min(100, (v/10)*100) },
            { mk: 'sdir', g: v => v['海浪方向'], dir: true },
            { mk: 'swell', g: v => v['海浪高度'], n: v => Math.min(100, (v/4)*100) }
        ];

        function renderVertical() {
            const grid = document.getElementById('main-grid');
            const stickyDate = document.getElementById('sticky-date');
            const keys = Object.keys(weatherData).sort();
            
            // Intersection Observer to update Date in Header
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const dateText = entry.target.getAttribute('data-date');
                        if (dateText) stickyDate.innerText = dateText;
                    }
                });
            }, { 
                rootMargin: '-50px 0px -80% 0px', // Trigger near the top
                threshold: 0 
            });

            keys.forEach((k, idx) => {
                const [date, time] = k.split(' ');
                const vals = weatherData[k];
                const prevK = keys[idx-1];
                const isNewDay = !prevK || prevK.split(' ')[0] !== date;

                const row = document.createElement('div');
                row.className = 'v-row' + (isNewDay ? ' day-mark' : '');
                row.setAttribute('data-date', date);
                observer.observe(row);

                // Combined Date/Time cell - only show time but anchor date
                const tCell = document.createElement('div');
                tCell.className = 'v-cell col-dt';
                tCell.innerHTML = `<span class="val-text" style="color:var(--energy-orange)">${time}</span>`;
                row.appendChild(tCell);

                metrics.forEach(m => {
                    const cell = document.createElement('div');
                    cell.className = `v-cell ${m.dir ? 'col-d' : 'col-w'}`;
                    const val = m.g(vals) || 0;

                    if (m.dir) {
                        cell.innerHTML = `
                            <span class="arrow-icon" style="transform:rotate(${(val+180)%360}deg); color: var(--sunshine)">↑</span>
                            <div class="val-text" style="font-size: 0.65rem; color: var(--text-dim)">${val.toFixed(0)}°</div>
                        `;
                    } else {
                        const curW = m.n(val);
                        const prevW = idx > 0 ? m.n(m.g(weatherData[keys[idx-1]]) || 0) : curW;
                        const nextW = idx < keys.length-1 ? m.n(m.g(weatherData[keys[idx+1]]) || 0) : curW;
                        const p1 = (prevW + curW) / 2;
                        const p2 = (curW + nextW) / 2;
                        const d = `M 0 0 L ${p1} 0 Q ${curW} 50, ${p2} 100 L 0 100 Z`;
                        const clr = getColor(m.colorTag || m.mk, val);
                        
                        cell.innerHTML = `
                            <div class="flow-box">
                                <svg class="flow-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
                                    <path d="${d}" fill="${clr}" opacity="0.65" />
                                </svg>
                            </div>
                            <div class="val-text">${val.toFixed(m.mk==='cloud'?0:1)}</div>
                        `;
                    }
                    row.appendChild(cell);
                });

                grid.appendChild(row);
            });
        }

        document.addEventListener('DOMContentLoaded', renderVertical);
    </script>
</body>
</html>